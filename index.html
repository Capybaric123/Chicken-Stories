<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-Fit Canvas Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden; /* Prevent scrolling */
        }
        canvas {
            display: block; /* Remove extra space below canvas */
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const player = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            radius: 20,
            speed: 2,
            angle: 0 // To hold the current angle of the player
        };

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            player.x = canvas.width / 2; // Center player on resize
            player.y = canvas.height / 2;
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas(); // Initial resize

        const keys = {};
        window.addEventListener('keydown', (e) => {
            keys[e.key] = true;
        });
        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        let mouseX = canvas.width / 2;
        let mouseY = canvas.height / 2;

        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
            mouseY = e.clientY - rect.top;

            // Calculate the angle to the mouse position
            let angle = Math.atan2(mouseY - player.y, mouseX - player.x);
        });

        function updatePlayer() {
            if (keys['w']) player.y -= player.speed;
            if (keys['s']) player.y += player.speed;
            if (keys['a']) player.x -= player.speed;
            if (keys['d']) player.x += player.speed;
        }

        function drawPlayer() {
            ctx.save();
            ctx.translate(player.x, player.y);
            ctx.rotate(angle);

            // Draw player outline
            ctx.strokeStyle = '#005f7f'; // Darker color for outline
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.arc(0, 0, player.radius, 0, Math.PI * 2);
            ctx.stroke();

            // Draw player body
            ctx.fillStyle = '#66b3e3'; // Light blue color
            ctx.beginPath();
            ctx.arc(0, 0, player.radius, 0, Math.PI * 2);
            ctx.fill();

            // Draw rectangle to represent the tail
            ctx.fillStyle = '#808080'; // Grey color for rectangle
            ctx.strokeStyle = '#4b4b4b'; // Darker color for outline
            ctx.lineWidth = 4;

            // Create rounded rectangle for tail
            const tailWidth = 8; // Width of the tail
            const tailLength = 40; // Length of the tail

            ctx.beginPath();
            ctx.moveTo(-tailWidth / 2, -player.radius); // Start at the top of the circle
            ctx.lineTo(tailWidth / 2, -player.radius); // Move to the right edge of the tail
            ctx.lineTo(tailWidth / 2, -player.radius - tailLength + 5); // Move down to the edge
            ctx.quadraticCurveTo(tailWidth / 2 + 5, -player.radius - tailLength, tailWidth / 2, -player.radius - tailLength); // Round edge
            ctx.lineTo(-tailWidth / 2, -player.radius - tailLength); // Move left edge down
            ctx.quadraticCurveTo(-tailWidth / 2 - 5, -player.radius - tailLength, -tailWidth / 2, -player.radius - tailLength + 5); // Round edge
            ctx.lineTo(-tailWidth / 2, -player.radius); // Close back to top
            ctx.closePath();

            ctx.fill();
            ctx.stroke();

            ctx.restore();
        }

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            updatePlayer();
            drawPlayer();
            requestAnimationFrame(gameLoop);
        }

        gameLoop(); // Start the game loop
    </script>
</body>
</html>
